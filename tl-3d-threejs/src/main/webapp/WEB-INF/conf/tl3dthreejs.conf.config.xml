<?xml version="1.0" encoding="utf-8"?>

<application xmlns:config="http://www.top-logic.com/ns/config/6.0">
	<services>
		<config service-class="com.top_logic.basic.util.ResourcesModule">
			<instance>
				<bundles>
					<bundle name="tl3dthreejs.app-messages" />
				</bundles>
			</instance>
		</config>
		
		<config service-class="com.top_logic.gui.JSFileCompiler">
			<instance>
				<additional-files>
					<file resource="webjar:org.webjars.npm/three:/webjars/three:build/three.module.js" type="module" as="three" />
					<file resource="webjar:org.webjars.npm/three:/webjars/three:examples/jsm/controls/OrbitControls.js" type="module" as="OrbitControls" />
					<file resource="webjar:org.webjars.npm/three:/webjars/three:examples/jsm/controls/TransformControls.js" type="module" as="TransformControls" />
					<file resource="webjar:org.webjars.npm/three:/webjars/three:examples/jsm/controls/FlyControls.js" type="module" as="FlyControls" />
					<file resource="webjar:org.webjars.npm/three:/webjars/three:examples/jsm/loaders/GLTFLoader.js" type="module" as="GLTFLoader" />
					<file resource="webjar:org.webjars.npm/gsap:/webjars/gsap:index.js" type="module" as="gsap" />
					<file resource="tl/ThreeJsControl.js" type="module" />
				</additional-files>
			</instance>
		</config>
		
		<config service-class="com.top_logic.model.search.expr.config.SearchBuilder">
			<instance>
				<methods>
					<method name="threejsGltf" class="com.top_logic.threed.threejs.script.ThreejsGltf$Builder"/>
					<method name="threejsGroup" class="com.top_logic.threed.threejs.script.ThreejsGroup$Builder"/>
					<method name="threejsAccess" class="com.top_logic.threed.threejs.script.ThreejsSceneNodeAccess$Builder"/>
				</methods>
			</instance>
		</config>
		
		<config service-class="com.top_logic.knowledge.service.migration.MigrationService">
			<instance>
				<modules>
					<module name="tl-3d-threejs" />
				</modules>
			</instance>
		</config>

		<config service-class="com.top_logic.tool.boundsec.CommandHandlerFactory">
			<instance>
				<handlers>
					<handler id="applyTransform" class="com.top_logic.threed.threejs.component.ThreeJsComponent$ApplyTransformCommand" 
						clique="apply" group="Write" executability="GeneralApply"/>
				</handlers>
			</instance>		
		</config>
	</services>

	<configs>
	</configs>
</application>
